apiVersion: apps/v1  
kind: Deployment  
metadata:  
  name: dotnet-web-app-deployment  
  labels:  
    app: dotnet-web-app  
spec:  
  replicas: 1
  selector:  
    matchLabels:  
      app: dotnet-web-app  
  template:  
    metadata:  
      labels:  
        app: dotnet-web-app  
    spec:  
      containers:  
      - name: dotnet-web-app  
        image: dotnet-app:<BUILD_TAG>
        imagePullPolicy: IfNotPresent
        ports:  
        - containerPort: 80  
        env:  
        - name: ASPNETCORE_URLS  
          value: "http://*:80"  
  
---  
  
apiVersion: v1  
kind: Service  
metadata:  
  name: dotnet-web-app-service  
spec:  
  type: NodePort
  ports:  
  - port: 80  
    targetPort: 80 
    nodePort: 42613 
  selector:  
    app: dotnet-web-app
